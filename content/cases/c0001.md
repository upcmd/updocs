---
title: "first task hello world"
date: 2020-03-28T00:32:26+33:00
draft: false

---

## show a hello world type of UP task

Welcome to this first quick start guide of up cmd

### Intro

A UP task files is composed of tasks, a task is composed of a sequential steps, a step is function call implementation of provided functions, for example, shell


### What's ignore_error

ignore_error is a annotated feature using flags to indicate that if that step fails, it simply ignore the status and continue the execution

##### ref: main task file

```
    docs:
      mddoc: |
        extend c0080 to use composible main tasks using externised flow configuration
         to make the whole task and flow clearer and modular
    
    vars:
      complex_data_structure_template: |
        school:
          name: '{{.school_name}}'
          address: '{{.school_address}}'
        principals:
        {{- range $_, $p :=.schoo_principals }}
          - {{$p}}
        {{- end}}
        ranking: '{{.schoo_ranking}}'
    
    dvars:
      - name: intest
        value: '{{ env "GOTEST" |default "false" }}'
    
    tasks:
      -
        name: task
        task:
          -
            func: call
            do:
              - compose_required_object
              - render
    
      -
        name: compose_required_object
        desc: prepare the data object for rendering
        ref: c0081_task_compose_required_object.yml
    
      -
        name: render
        desc: render data
        ref: c0081_task_render.yml
    
```

### What's like when you run the task

* Firstly, it will try to create the folder if it does not exist
add reference link

##### ref: logfile

```
    loading [Config]:  ./tests/functests/upconfig.yml
    -exec task: task
    loading [Task]:  ./tests/functests/c0083.yml
    instance id: dev
    ==Task: [ unamed ]
    step(  1):
    --Step: [ unamed ]
    executing linking tasks
        taskname( 1):
    setup
    ==Task: [ unamed ]
    step(  1):
    --Step: [ unamed ]
    cmd( 1):
     .. ok
    ?intest ->  false
    cmd( 2):
     .. ok
    /up
    . ok
    step(  2):
    --Step: [ unamed ]
    cmd cmdItem( 1): print ()
    ~~SubStep: [ unamed ]
    intest is: [false]
    cmd cmdItem( 2): reg ()
    ~~SubStep: [ unamed ]
    step(  3):
    --Step: [ unamed ]
    cmd cmdItem( 1): print ()
    ~~SubStep: [ unamed ]
    root dir is: [/up]
    cmd cmdItem( 2): print ()
    ~~SubStep: [ unamed ]
    correct working dir is: [/up]
    cmd cmdItem( 3): reg ()
    ~~SubStep: [ unamed ]
    cmd cmdItem( 4): print ()
    ~~SubStep: [ unamed ]
    doc dir is: [/up/tests/functests]
        taskname( 2):
    compose_required_object
    ==Task: [ prepare the data object for rendering ]
    step(  1):
    --Step: [ unamed ]
    cmd cmdItem( 1): print ()
    ~~SubStep: [ unamed ]
    folder: spike
    title: Doco auto generation
    head: This is to prototype doco auto generation
    head_content: |-
      This is to prototype doco auto generation, provided all these meta data, up cmd can help generate
      a auto doco
    
    sections:
      - title: Intro
        content: |
          The up project uses auto generate doco, for community memebers, if you would like to contribute
          use case or any interesting usage of up cmd, you could raise a pull request and commit your func
          test case and do complete your test and automated regression tests
    
      - title: How to use?
        content: |
          Config docs->meta data configuration
          add reference link
        refs:
          - title: main task file
            type: yml
            link: /up/tests/functests/c0083.yml
    
      - title: Steps
        content: |
          * Firstly, it will try to create the folder if it does not exist
          add reference link
        refs:
          - title: logfile
            type: txt
            link: /up/tests/functests/c0083.log
    
    related:
      refs:
        - title: main task file
          link: main.html
    
    step(  2):
    --Step: [ unamed ]
    cmd cmdItem( 1): print (shows that reg has set this var to global space)
    ~~SubStep: [ shows that reg has set this var to global space ]
    folder: spike
    title: Doco auto generation
    head: This is to prototype doco auto generation
    head_content: |-
      This is to prototype doco auto generation, provided all these meta data, up cmd can help generate
      a auto doco
    
    sections:
      - title: Intro
        content: |
          The up project uses auto generate doco, for community memebers, if you would like to contribute
          use case or any interesting usage of up cmd, you could raise a pull request and commit your func
          test case and do complete your test and automated regression tests
    
      - title: How to use?
        content: |
          Config docs->meta data configuration
          add reference link
        refs:
          - title: main task file
            type: yml
            link: /up/tests/functests/c0083.yml
    
      - title: Steps
        content: |
          * Firstly, it will try to create the folder if it does not exist
          add reference link
        refs:
          - title: logfile
            type: txt
            link: /up/tests/functests/c0083.log
    
    related:
      refs:
        - title: main task file
          link: main.html
    
    cmd cmdItem( 2): printobj ()
    ~~SubStep: [ unamed ]
    object:
     doc_meta_yml_object: {
      "folder": "spike",
      "title": "Doco auto generation",
      "head": "This is to prototype doco auto generation",
      "head_content": "This is to prototype doco auto generation, provided all these meta data, up cmd can help generate\na auto doco",
      "sections": {
        {
          "title": "Intro",
          "content": "The up project uses auto generate doco, for community memebers, if you would like to contribute\nuse case or any interesting usage of up cmd, you could raise a pull request and commit your func\ntest case and do complete your test and automated regression tests\n"
        },
        {
          "refs": {
            {
              "title": "main task file",
              "type": "yml",
              "link": "/up/tests/functests/c0083.yml"
            }
          },
          "title": "How to use?",
          "content": "Config docs->meta data configuration\nadd reference link\n"
        },
        {
          "title": "Steps",
          "content": "* Firstly, it will try to create the folder if it does not exist\nadd reference link\n",
          "refs": {
            {
              "title": "logfile",
              "type": "txt",
              "link": "/up/tests/functests/c0083.log"
            }
          }
        }
      },
      "related": {
        "refs": {
          {
            "title": "main task file",
            "link": "main.html"
          }
        }
      }
    }
    
        taskname( 3):
    render
    ==Task: [ unamed ]
    step(  1):
    --Step: [ debug and print doc_template ]
    cmd cmdItem( 1): print ()
    ~~SubStep: [ unamed ]
    ---
    title: "{{.title}}"
    date: {{now}}
    draft: false
    
    ---
    
    ## {{.head}}
    
    {{.head_content}}
    
    {{- range $x :=.sections }}
    
    ### {{$x.title}}
    
    {{$x.content}}
    
      {{- range $ref :=.refs }}
    ##### ref: {{$ref.title}}
    
    ```
    {{$ref.link |filecontent|indent 4}}
    ```
      {{- end}}
    
    {{- end}}
    
    ### Other references:
    {{ with .related }}
      {{- range $ref :=.refs }}
    {{$ref.title}}: {{$ref.link}}
      {{- end}}
    {{ end }}
    
    cmd cmdItem( 2): print ()
    ~~SubStep: [ unamed ]
    ---
    title: "{{.title}}"
    date: {{now}}
    draft: false
    
    ---
    
    ## {{.head}}
    
    {{.head_content}}
    
    {{- range $x :=.sections }}
    
    ### {{$x.title}}
    
    {{$x.content}}
    
      {{- range $ref :=.refs }}
    ##### ref: {{$ref.title}}
    
    ```
    {{$ref.link |filecontent|indent 4}}
    ```
      {{- end}}
    
    {{- end}}
    
    ### Other references:
    {{ with .related }}
      {{- range $ref :=.refs }}
    {{$ref.title}}: {{$ref.link}}
      {{- end}}
    {{ end }}
    
    step(  2):
    --Step: [ debug and print doc_template
    it is expected no value will be rendered as the
    template expecting a data object
     ]
    cmd cmdItem( 1): print (it will not be rendered as the variable is not in global space)
    ~~SubStep: [ it will not be rendered as the variable is not in global space ]
    ---
    title: "<no value>"
    date: 2020-02-25T12:11:39+22:00
    draft: false
    
    ---
    
    ## <no value>
    
    <no value>
    
    ### Other references:
    
    
    step(  3):
    --Step: [ render using doc_meta_yml_object as data rather than the default vas in global space
    what happens here is that it will do regular 1 layer expand, then apply another expand
    using the specified data object, so you do not need to specify expand: 2 as implicitly
    there are actually 2 expansion
     ]
    cmd cmdItem( 1): writefile ()
    ~~SubStep: [ unamed ]
    cmd cmdItem( 2): readfile ()
    ~~SubStep: [ unamed ]
          cmd readfile -> open /tmp/spike_doc.md: no such file or directory
    ERROR: please fix file path and name issues
    
```

### Other references:

main task file: main.html

